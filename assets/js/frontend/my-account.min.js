jQuery(function(e){e(".profile-pic-upload").on("click",function(t){t.preventDefault(),wp.media.controller.Library.prototype.defaults.contentUserSetting=!1,wp.media.controller.Library.prototype.defaults.router=!1,wp.media.controller.Library.prototype.defaults.searchable=!0,wp.media.controller.Library.prototype.defaults.sortable=!1;var i=e(this).closest("form").find("img.profile-preview"),o=wp.media({title:"Upload Profile Picture",button:{text:"Select Image"},multiple:!1}).open(),r=e(this).closest("form").find('input[name="profile-pic-id"]'),l=e(this).closest("form").find("button.profile-pic-remove");o.on("select",function(){var e,t,s=o.state().get("selection").first(),n=s.toJSON().sizes.full.url;t=s.toJSON().sizes.full.url,e=s.toJSON().id,""!==(n=_.isUndefined(s.toJSON().sizes.thumbnail)?t:s.toJSON().sizes.thumbnail.url)&&(i.attr("src",n),r.val(e),l.show())})}),e(".profile-pic-remove").on("click",function(t){t.preventDefault();var i=e(this).closest("form").find('input[name="profile-pic-id"]'),o=e(this).closest("form").find('input[name="profile-default-image"]'),r=e(this).closest("form").find("img.profile-preview");i.val(""),r.attr("src",o.val()),e(this).hide()})});
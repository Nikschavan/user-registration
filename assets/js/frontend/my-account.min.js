jQuery(function(i){i(".profile-pic-upload").on("click",function(e){e.preventDefault();var t=i(this).closest("form").find("img.profile-preview"),o=wp.media({multiple:!1}).open(),l=i(this).closest("form").find('input[name="profile-pic-id"]'),s=i(this).closest("form").find("button.profile-pic-remove");o.on("select",function(){var i,e,n=o.state().get("selection").first(),r=n.toJSON().sizes.full.url;e=n.toJSON().sizes.full.url,i=n.toJSON().id,""!==(r=_.isUndefined(n.toJSON().sizes.thumbnail)?e:n.toJSON().sizes.thumbnail.url)&&(t.attr("src",r),l.val(i),s.show())})}),i(".profile-pic-remove").on("click",function(e){e.preventDefault();var t=i(this).closest("form").find('input[name="profile-pic-id"]'),o=i(this).closest("form").find('input[name="profile-default-image"]'),l=i(this).closest("form").find("img.profile-preview");t.val(""),l.attr("src",o.val()),i(this).hide()})});